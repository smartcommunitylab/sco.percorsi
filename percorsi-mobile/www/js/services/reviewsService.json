angular.module('roveretoPercorsi.services.reviews', [])

.factory('reviewsService', function ($http, $q, Config) {
    var reviews = null;
    var counter = '10';

    var reviewsService = {};
    reviewsService.getMaxCounter = function () {
        return counter;
    }

    reviewsService.getReviewsList = function (from) {
        var start = null;
        var deferred = $q.defer();
        /*temp*/
        $http.get('data/reviews.json').success(function (data) {
            reviews = data;
            if (from == 0)
                deferred.resolve(reviews);
            else deferred.resolve([]);
        }).error(function (data, status, headers, config) {
            console.log(data + status + headers + config);
            deferred.reject(err);
        });
        return deferred.promise;
        /*temp*/
    }

    reviewsService.sendVote = function (vote) {
        /*temp*/
        return $http({
            method: 'POST',
            url: Config.URL() + '/' + Config.provider() + '/services/' + Config.service() + '/user/issues',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'

            },
            data: vote
        }).
        success(function (data, status, headers, config) {

        }).
        error(function (data, status, headers, config) {


        });
        /*temp*/
    }
    reviewsService.sendReview = function (review) {
        /*temp*/
        return $http({
            method: 'POST',
            url: Config.URL() + '/' + Config.provider() + '/services/' + Config.service() + '/user/issues',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'

            },
            data: review
        }).
        success(function (data, status, headers, config) {

        }).
        error(function (data, status, headers, config) {


        });
        /*temp*/
    }
    return reviewsService;
})
